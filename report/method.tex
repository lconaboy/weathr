\section{Method}

Here we will discuss our implementation of cloud coverage analysis,
NDVI analysis, with use of beautiful flow charts. We should illustrate
the effectiveness of our analysis on test data.

\subsection{Thresholds}
Perhaps the most essential part of processing the EUMETSAT images is the ability
to differentiate between cloud and land. In order to do this, we rely on the
fact that clouds have a much higher reflectance than areas of land (notable
exceptions to this are snow, ice and salt pans). It follows that the
distribution of values for a single pixel over a large enough number of days
will be bimodal, the peak at the smaller value corresponding to land pixels and
the peak at the large value corresponding to cloudy pixels. The task is now one
of producing thresholds that reliably separate the two peaks. Otsu's method \cite{gonzalez2008} separates pixels into two groups, or \emph{classes}, by maximising the variance between these classes, making it an optimum method for thresholding \footnote{We have made use of \texttt{scipy}'s Otsu thresholding implementation.}. An example of Otsu thresholding at work is shown in Figure \ref{fig:otsu} for a random pixel.
\begin{center}
    \includegraphics[width=\linewidth]{figures/otsu_bimodal.pdf}
    \captionof{figure}{The histogram of pixel values for a random pixel. Shown
      by the red line is the threshold calculated using Otsu's method -- it can
      be seen how well this method separates the two peaks.}
    \label{fig:otsu}
\end{center}
Now that we have the method for calculating the threshold of a single pixel all that remains is to apply it to the entire image, the process for doing so is detialed in Figure \ref{fig:thr_fc}.
% how do I put tikz in?
%% \begin{center}
%%   \input{threshold_flowchart.tikz}
%%   \captionof{figure}{Flowchart for calculating threshold values.}
%%   \label{fig:thr_fc}
%% \end{center}


%% Local Variables:
%% fill-column: 80
%% End:
